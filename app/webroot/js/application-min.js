jQuery(document).ready(function(a){jQuery.ajaxSetup({cache:false});if(jQuery("#flashMessage.success").length){jQuery("#flashMessage.success").effect("highlight",{color:"#00c500"},2000)}if(jQuery("#flashMessage.error .error_message").length){jQuery("#flashMessage.error .error_message").effect("highlight",{color:"#ff0000"},2000)}if(jQuery("#PodcastSyndicated").length>0){var b=jQuery("#PodcastPodcastFlag").val();show_hide_podcast_elements(b);jQuery("#PodcastFlagLink").live("click",function(c){c.preventDefault();var d=jQuery("#PodcastPodcastFlag").val();if(d==1){jQuery("#PodcastPodcastFlag").val(0);show_hide_podcast_elements(0)}else{jQuery("#PodcastPodcastFlag").val(1);show_hide_podcast_elements(1)}})}jQuery(".datepicker").datepicker({dateFormat:"yy-mm-dd"});jQuery(".move").live("click",function(){var c=jQuery(this).attr("data-source");var d=jQuery(this).attr("data-target");jQuery("#"+c+" option:selected").each(function(){jQuery("#"+d).append('<option value="'+this.value+'">'+this.innerHTML+"</option>");jQuery(this).remove()})});jQuery(".auto_select_and_submit").live("click",function(f){f.preventDefault();var d=jQuery(this).parents("form:first");var c=d.attr("id");jQuery(this).parents("form:first").find(":input.selected").each(function(e){jQuery(this).find("option").each(function(g){jQuery(this).attr("selected","selected")})});jQuery("#"+c).submit()});jQuery(".auto_select").live("click",function(f){f.preventDefault();var d=jQuery(this).parents("form:first");var c=d.attr("id");jQuery(this).parents("form:first").find(":input.selected").each(function(e){jQuery(this).find("option").each(function(g){jQuery(this).attr("selected","selected")})})});jQuery(".toggler").click(function(d){d.preventDefault();var c=jQuery(this).attr("data-status");if(c=="ticked"){unTickCheckboxes();jQuery(this).attr("data-status","unticked")}else{tickCheckboxes();jQuery(this).attr("data-status","ticked")}});jQuery(".multiple_action_button").click(function(f){f.preventDefault();var d=jQuery(this).parents("form:first").find("input[type=checkbox]");if(d.filter(":checked").length){jQuery(this).parents("form:first").attr("action",c);if(confirm("Are you sure?")){var c=jQuery(this).attr("href");jQuery(this).parents("form:first").attr("action",c);jQuery(this).closest("form").submit()}}else{alert("You must select at least one object using the checkboxes provided")}});jQuery(".juggle").click(function(d){d.preventDefault();var c=jQuery(this).attr("data-target");jQuery("#"+c).toggle("slow")});jQuery(".input_greeting").each(function(d){var c=jQuery(this).val();if(c.length==0){var f=jQuery(this).attr("title");jQuery(this).text(f);jQuery(this).val(f)}});jQuery(".input_greeting").each(function(c){jQuery(this).focus(function(){var e=jQuery(this).attr("title");var d=jQuery(this).val();if(d==e){jQuery(this).text("");jQuery(this).val("")}})});jQuery(".input_greeting").each(function(c){jQuery(this).blur(function(){var d=jQuery(this).val();if(d.length==0){var e=jQuery(this).attr("title");jQuery(this).text(e);jQuery(this).val(e)}})});jQuery(".personalise").live("click",function(d){var c=jQuery(this).attr("data-target");jQuery("th."+c).toggle();jQuery("td."+c).toggle();write_cookie("OpenUniversity")});jQuery("#PodcastItemGenerateYoutubeDescription").live("click",function(d){d.preventDefault();var c=confirm("You are about to automatically generate a description based on the values held in related form fields. Are you sure?");if(c){var f=jQuery("#PodcastCourseCode").val();text="Free learning from The Open University http://www.open.ac.uk/openlearn/";text+="\n\n---\n\n";text+=jQuery("#PodcastItemSummary").val();text+="\n\n";text+="(Part X of Y)";text+="\n\n --- \n\n";if(f.length){text+="For more information about ";text+=jQuery("#PodcastItemTitle").val();text+=" visit http://www3.open.ac.uk/study/";if(f.substring(0,1)==8){text+="postgraduate/course/"+f+".htm"}else{text+="undergraduate/course/"+f+".htm"}}if(jQuery("#PodcastItemYoutubeLink1").length){text+="\n\n---\n\n";text+=jQuery("#PodcastItemYoutubeLink1Text").val();text+="\n";text+=jQuery("#PodcastItemYoutubeLink1").val()}if(jQuery("#PodcastItemYoutubeLink2").length){text+="\n\n---\n\n";text+=jQuery("#PodcastItemYoutubeLink2Text").val();text+="\n";text+=jQuery("#PodcastItemYoutubeLink2").val()}if(jQuery("#PodcastItemYoutubeLink3").length){text+="\n\n---\n\n";text+=jQuery("#PodcastItemYoutubeLink3Text").val();text+="\n";text+=jQuery("#PodcastItemYoutubeLink3").val()}jQuery("#PodcastItemYoutubeDescription").val(text)}});if(jQuery(".formfield_03").length>0){jQuery.ajax({type:"GET",url:"/users/itunesuser",success:function(c){if(c==false){jQuery(".formfield_03").hide()}}})}jQuery(".jquery_display").live("click",function(f){f.preventDefault();var c=jQuery(this).attr("data-source");var d=jQuery(this).attr("data-target");jQuery("#"+c).slideUp();jQuery(this).parents(".action_buttons").hide();jQuery("#"+d).slideDown();jQuery("#PodcastUpdateButtonContainer").show()});jQuery(".podcast_item_update").live("click",function(d){d.preventDefault();var f=jQuery(this).attr("data-id");var c=jQuery(this).html();jQuery("#modal").dialog({width:1000,autoOpen:false,modal:true,title:c});jQuery("#modal").dialog("open");jQuery(".ui-widget-overlay").click(function(){a("#modal").dialog("close")});getPodcastItem(f,"summary")});jQuery(".PodcastItemPreviewLink").live("click",function(f){f.preventDefault();if(jQuery("#PodcastItemSubmitButton").is(":visible")){if(confirm("You will lose any unsaved changes. Are you sure you wish to continue?")){var g=jQuery(this).parent("li").attr("data-id");var d=jQuery(this).parent("li").attr("data-element");getPodcastItem(g,d)}}else{jQuery("li.active").each(function(){var e=jQuery(this).attr("data-element");jQuery("."+e).hide();jQuery(this).removeClass("active")});jQuery("#flashMessage").hide();jQuery("#flashMessage").hide();jQuery(this).parent("li").addClass("active");var c=jQuery(this).parent("li").attr("data-element");jQuery("."+c).show();jQuery("#PodcastUpdateButtonContainer").hide()}});jQuery(".cancel").live("click",function(c){c.preventDefault();if(confirm("Are you sure you wish to cancel all changes?")){var d=jQuery(this).attr("data-id");getPodcastItem(d,"summary")}});jQuery(".ajax_link").live("click",function(d){d.preventDefault();if(confirm("Are you sure you wish to delete?")){var c=jQuery(this).attr("href");ajaxCall(c)}})});function write_cookie(a){var b=$("#PersonaliseForm").serialize();jQuery.ajax({type:"POST",url:"/podcasts/cookie",data:b,error:function(){alert("unable to set cookie")}})}function show_hide_podcast_elements(a){if(a==1){jQuery("#PodcastSyndicationContainer").show("slow")}else{jQuery("#PodcastSyndicationContainer").hide("slow")}}function tickCheckboxes(){jQuery('input[type="checkbox"]').each(function(a){jQuery(this).attr("checked",true)})}function unTickCheckboxes(){jQuery('input[type="checkbox"]').each(function(a){jQuery(this).attr("checked",false)})}function getPodcastItem(b,a){jQuery.ajax({type:"GET",url:"/podcast_items/edit/"+b+"/"+a,success:function(d){jQuery("#modal").html(d);var c={target:"#modal",replaceTarget:false};jQuery("#PodcastItemSubmitButton").live("click",function(){jQuery("#PodcastItemEditForm").ajaxSubmit(c)})},error:function(c){jQuery("#modal").html("It would appear you have been logged out")}})}function ajaxCall(a){jQuery.ajax({type:"GET",url:a,success:function(c){jQuery("#modal").html(c);var b={target:"#modal",replaceTarget:false};jQuery("#PodcastItemSubmitButton").live("click",function(){jQuery(this).closest("form").ajaxSubmit(b)})},error:function(b){jQuery("#modal").html("It would appear you have been logged out")}})};